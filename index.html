<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Bird Tap Game</title>
  <!-- Favicon and app icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" href="assets/favicon/apple-touch-icon.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="icon" type="image/png" sizes="192x192" href="assets/favicon/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="assets/favicon/android-chrome-512x512.png">
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <style type="text/tailwindcss">
    :root {
      --primary-color: #4CAF50;
      --secondary-color: #FFC107;
      --background-color: #F0F4F8;
    }
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    .font-brand {
      font-family: 'Fredoka One', cursive;
    }
    .bg-gradient-sky {
      background: linear-gradient(180deg, #87CEEB 0%, #E0F2F1 100%);
    }
    .interactive {
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    .btn-glow {
      box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.3);
      transition: box-shadow 0.3s ease;
    }
    .btn-glow:hover {
      box-shadow: 0 0 12px 4px rgba(76, 175, 80, 0.4);
    }
    .btn-glow-amber {
      box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.3);
      transition: box-shadow 0.3s ease;
    }
    .btn-glow-amber:hover {
      box-shadow: 0 0 12px 4px rgba(255, 193, 7, 0.4);
    }

    /* Version Badge Styles */
    .version-link {
      text-decoration: underline;
      cursor: pointer;
      transition: color 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .version-link:hover {
      color: var(--primary-color);
    }

    .new-badge {
      display: inline-block;
      background: linear-gradient(135deg, #FF5722 0%, #FF9800 100%);
      color: white;
      font-size: 9px;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 0 2px 8px rgba(255, 87, 34, 0.4);
      animation: pulse-badge 2s ease-in-out infinite;
    }

    @keyframes pulse-badge {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.05);
        opacity: 0.9;
      }
    }

    .new-badge.hidden {
      display: none;
    }

    /* Changelog separator */
    .changelog-separator {
      height: 2px;
      background: linear-gradient(to right, transparent, #CBD5E0, transparent);
      margin: 1.5rem 0;
    }

    /* Custom Smooth Curved Scrollbar for Changelog Modal */
    .custom-scrollbar {
      scrollbar-width: thin;
      scrollbar-color: rgba(76, 175, 80, 0.5) transparent;
      scroll-behavior: smooth;
    }

    .custom-scrollbar::-webkit-scrollbar {
      width: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background: transparent;
      border-radius: 100px;
      margin: 12px 0;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, 
        rgba(76, 175, 80, 0.4) 0%, 
        rgba(76, 175, 80, 0.6) 50%,
        rgba(76, 175, 80, 0.4) 100%
      );
      border-radius: 100px;
      border: 2px solid transparent;
      background-clip: padding-box;
      transition: all 0.3s ease;
      box-shadow: 0 0 6px rgba(76, 175, 80, 0.3);
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, 
        rgba(76, 175, 80, 0.6) 0%, 
        rgba(76, 175, 80, 0.8) 50%,
        rgba(76, 175, 80, 0.6) 100%
      );
      box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:active {
      background: linear-gradient(180deg, 
        rgba(76, 175, 80, 0.7) 0%, 
        rgba(76, 175, 80, 0.9) 50%,
        rgba(76, 175, 80, 0.7) 100%
      );
    }

    /* Scroll indicator arrow */
    .scroll-indicator {
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 10;
      animation: bounce 2s ease-in-out infinite;
      border: 1px solid rgba(255, 255, 255, 0.5);
    }

    .scroll-indicator.visible {
      opacity: 1;
    }

    .scroll-indicator svg {
      width: 20px;
      height: 20px;
      color: var(--primary-color);
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      50% {
        transform: translateX(-50%) translateY(5px);
      }
    }

    /* Enhanced Cloud Styles with Texture */
    .cloud-container {
      position: absolute;
      inset: 0;
      z-index: 1;
      pointer-events: none;
      overflow: hidden;
    }

    .cloud {
      position: absolute;
      background: rgba(255, 255, 255, 0.92);
      border-radius: 50%;
      filter: blur(2px) brightness(1.05);
      opacity: 0.85;
      animation: float linear infinite;
      background-image: 
        radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 20%, transparent 50%),
        radial-gradient(circle at 70% 60%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 30%, transparent 60%);
    }

    .cloud::before,
    .cloud::after {
      content: '';
      position: absolute;
      background: rgba(255, 255, 255, 0.92);
      border-radius: 50%;
      background-image: 
        radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 70%);
    }

    /* Original clouds with texture */
    .cloud-1 {
      width: 180px;
      height: 60px;
      top: 10%;
      left: -180px;
      animation-duration: 120s;
      animation-delay: 0s;
    }

    .cloud-1::before {
      width: 70px;
      height: 70px;
      top: -25px;
      left: 15px;
    }

    .cloud-1::after {
      width: 55px;
      height: 55px;
      top: -20px;
      right: 20px;
    }

    .cloud-2 {
      width: 220px;
      height: 75px;
      top: 30%;
      left: -220px;
      animation-duration: 140s;
      animation-delay: 20s;
    }

    .cloud-2::before {
      width: 85px;
      height: 85px;
      top: -30px;
      left: 20px;
    }

    .cloud-2::after {
      width: 65px;
      height: 65px;
      top: -25px;
      right: 25px;
    }

    .cloud-3 {
      width: 160px;
      height: 55px;
      top: 50%;
      left: -160px;
      animation-duration: 130s;
      animation-delay: 40s;
    }

    .cloud-3::before {
      width: 60px;
      height: 60px;
      top: -22px;
      left: 12px;
    }

    .cloud-3::after {
      width: 50px;
      height: 50px;
      top: -18px;
      right: 18px;
    }

    .cloud-4 {
      width: 200px;
      height: 65px;
      top: 20%;
      left: -200px;
      animation-duration: 150s;
      animation-delay: 60s;
    }

    .cloud-4::before {
      width: 75px;
      height: 75px;
      top: -28px;
      left: 18px;
    }

    .cloud-4::after {
      width: 60px;
      height: 60px;
      top: -23px;
      right: 22px;
    }

    .cloud-5 {
      width: 140px;
      height: 50px;
      top: 65%;
      left: -140px;
      animation-duration: 125s;
      animation-delay: 80s;
    }

    .cloud-5::before {
      width: 55px;
      height: 55px;
      top: -20px;
      left: 10px;
    }

    .cloud-5::after {
      width: 45px;
      height: 45px;
      top: -16px;
      right: 15px;
    }

    .cloud-6 {
      width: 190px;
      height: 62px;
      top: 40%;
      left: -190px;
      animation-duration: 135s;
      animation-delay: 100s;
    }

    .cloud-6::before {
      width: 68px;
      height: 68px;
      top: -26px;
      left: 16px;
    }

    .cloud-6::after {
      width: 58px;
      height: 58px;
      top: -21px;
      right: 19px;
    }

    /* Additional Clouds */
    .cloud-7 {
      width: 210px;
      height: 70px;
      top: 15%;
      left: 15%;
      animation-duration: 160s;
      animation-delay: 5s;
    }

    .cloud-7::before {
      width: 80px;
      height: 80px;
      top: -28px;
      left: 18px;
    }

    .cloud-7::after {
      width: 65px;
      height: 65px;
      top: -23px;
      right: 20px;
    }

    .cloud-8 {
      width: 150px;
      height: 52px;
      top: 55%;
      left: 25%;
      animation-duration: 155s;
      animation-delay: 15s;
    }

    .cloud-8::before {
      width: 58px;
      height: 58px;
      top: -21px;
      left: 12px;
    }

    .cloud-8::after {
      width: 48px;
      height: 48px;
      top: -17px;
      right: 16px;
    }

    .cloud-9 {
      width: 230px;
      height: 78px;
      top: 25%;
      left: 45%;
      animation-duration: 170s;
      animation-delay: 25s;
    }

    .cloud-9::before {
      width: 88px;
      height: 88px;
      top: -32px;
      left: 22px;
    }

    .cloud-9::after {
      width: 70px;
      height: 70px;
      top: -27px;
      right: 24px;
    }

    .cloud-10 {
      width: 130px;
      height: 48px;
      top: 70%;
      left: 65%;
      animation-duration: 140s;
      animation-delay: 35s;
    }

    .cloud-10::before {
      width: 52px;
      height: 52px;
      top: -19px;
      left: 10px;
    }

    .cloud-10::after {
      width: 42px;
      height: 42px;
      top: -15px;
      right: 14px;
    }

    .cloud-11 {
      width: 190px;
      height: 65px;
      top: 45%;
      left: 75%;
      animation-duration: 165s;
      animation-delay: 45s;
    }

    .cloud-11::before {
      width: 72px;
      height: 72px;
      top: -26px;
      left: 16px;
    }

    .cloud-11::after {
      width: 60px;
      height: 60px;
      top: -22px;
      right: 18px;
    }

    @keyframes float {
      0% {
        transform: translateX(0) translateY(0px);
      }
      50% {
        transform: translateX(calc(100vw + 400px)) translateY(-3px);
      }
      100% {
        transform: translateX(calc(100vw + 400px)) translateY(0px);
      }
    }

    /* Sun Effect */
    .sun {
      position: absolute;
      top: 8%;
      right: 10%;
      width: 90px;
      height: 90px;
      background: radial-gradient(circle, #FFD700 0%, #FFA500 70%, transparent 100%);
      border-radius: 50%;
      filter: blur(6px) brightness(1.1);
      opacity: 0.85;
      z-index: 1;
    }

    /* Sky Gradient Enhancement */
    .sky-gradient {
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(ellipse at top right, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at bottom left, rgba(135, 206, 235, 0.25) 0%, transparent 50%),
        linear-gradient(180deg, #87CEEB 0%, #E0F2F1 100%);
      z-index: 0;
    }

    /* Realistic Grass Styles - Reduced height for mobile */
    .grass-container {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 100px;
      z-index: 2;
      pointer-events: none;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      .grass-container {
        height: 120px;
      }
    }

    .grass-layer {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 100px;
      background: linear-gradient(0deg,
        #1b5e20 0%,
        #2e7d32 10%,
        #388e3c 25%,
        #43a047 40%,
        #4caf50 60%,
        #66bb6a 80%,
        #81c784 95%,
        #a5d6a7 100%
      );
      clip-path: polygon(
        0% 100%, 
        1.5% 88%, 3.5% 93%, 5.5% 80%, 7.5% 96%, 
        9.5% 83%, 11.5% 89%, 13.5% 76%, 15.5% 92%, 17.5% 81%,
        19.5% 86%, 21.5% 72%, 23.5% 89%, 25.5% 79%, 27.5% 94%,
        29.5% 83%, 31.5% 87%, 33.5% 74%, 35.5% 91%, 37.5% 80%,
        39.5% 88%, 41.5% 76%, 43.5% 93%, 45.5% 82%, 47.5% 89%,
        49.5% 78%, 51.5% 95%, 53.5% 84%, 55.5% 90%, 57.5% 79%,
        59.5% 86%, 61.5% 73%, 63.5% 88%, 65.5% 80%, 67.5% 96%,
        69.5% 83%, 71.5% 89%, 73.5% 77%, 75.5% 93%, 77.5% 82%,
        79.5% 88%, 81.5% 75%, 83.5% 92%, 85.5% 81%, 87.5% 97%,
        89.5% 84%, 91.5% 90%, 93.5% 78%, 95.5% 94%, 97.5% 83%,
        100% 100%
      );
    }

    @media (min-width: 768px) {
      .grass-layer {
        height: 120px;
      }
    }

    .grass-blades {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 130px;
      z-index: 3;
    }

    @media (min-width: 768px) {
      .grass-blades {
        height: 150px;
      }
    }

    .grass-blade {
      position: absolute;
      bottom: 0;
      width: 3px;
      border-radius: 2px 2px 0 0;
      transform-origin: bottom center;
      animation: grass-sway ease-in-out infinite;
      background: linear-gradient(to top,
        rgba(27, 94, 32, 0.95),
        rgba(76, 175, 80, 0.85) 30%,
        rgba(129, 199, 132, 0.6) 70%,
        transparent 100%
      );
      box-shadow: 0 -2px 2px rgba(0, 0, 0, 0.05);
    }

    .grass-blade::before {
      content: '';
      position: absolute;
      top: -6px;
      left: 50%;
      transform: translateX(-50%);
      width: 5px;
      height: 6px;
      background: linear-gradient(to top,
        rgba(76, 175, 80, 0.9),
        rgba(129, 199, 132, 0.7) 80%,
        transparent
      );
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    }

    /* Individual grass blade animations - more natural variation */
    .grass-blade-1 { left: 2%; height: 65px; animation-duration: 2.8s; animation-delay: 0.1s; animation-name: grass-sway-1; }
    .grass-blade-2 { left: 5%; height: 80px; animation-duration: 2.5s; animation-delay: 0.4s; animation-name: grass-sway-2; }
    .grass-blade-3 { left: 8%; height: 55px; animation-duration: 3.1s; animation-delay: 0.7s; animation-name: grass-sway-3; }
    .grass-blade-4 { left: 12%; height: 95px; animation-duration: 2.3s; animation-delay: 0.2s; animation-name: grass-sway-4; }
    .grass-blade-5 { left: 16%; height: 70px; animation-duration: 2.9s; animation-delay: 0.5s; animation-name: grass-sway-5; }
    .grass-blade-6 { left: 20%; height: 85px; animation-duration: 2.6s; animation-delay: 0.8s; animation-name: grass-sway-6; }
    .grass-blade-7 { left: 25%; height: 60px; animation-duration: 3.0s; animation-delay: 0.3s; animation-name: grass-sway-7; }
    .grass-blade-8 { left: 30%; height: 75px; animation-duration: 2.4s; animation-delay: 0.6s; animation-name: grass-sway-8; }
    .grass-blade-9 { left: 35%; height: 90px; animation-duration: 2.7s; animation-delay: 0.9s; animation-name: grass-sway-9; }
    .grass-blade-10 { left: 40%; height: 65px; animation-duration: 3.2s; animation-delay: 0.1s; animation-name: grass-sway-10; }
    .grass-blade-11 { left: 45%; height: 80px; animation-duration: 2.5s; animation-delay: 0.4s; animation-name: grass-sway-11; }
    .grass-blade-12 { left: 50%; height: 55px; animation-duration: 2.8s; animation-delay: 0.7s; animation-name: grass-sway-12; }
    .grass-blade-13 { left: 55%; height: 95px; animation-duration: 2.6s; animation-delay: 0.2s; animation-name: grass-sway-13; }
    .grass-blade-14 { left: 60%; height: 70px; animation-duration: 3.0s; animation-delay: 0.5s; animation-name: grass-sway-14; }
    .grass-blade-15 { left: 65%; height: 85px; animation-duration: 2.4s; animation-delay: 0.8s; animation-name: grass-sway-15; }
    .grass-blade-16 { left: 70%; height: 60px; animation-duration: 2.9s; animation-delay: 0.3s; animation-name: grass-sway-16; }
    .grass-blade-17 { left: 75%; height: 75px; animation-duration: 2.7s; animation-delay: 0.6s; animation-name: grass-sway-17; }
    .grass-blade-18 { left: 80%; height: 90px; animation-duration: 3.1s; animation-delay: 0.9s; animation-name: grass-sway-18; }
    .grass-blade-19 { left: 85%; height: 65px; animation-duration: 2.5s; animation-delay: 0.1s; animation-name: grass-sway-19; }
    .grass-blade-20 { left: 90%; height: 80px; animation-duration: 2.8s; animation-delay: 0.4s; animation-name: grass-sway-20; }
    .grass-blade-21 { left: 94%; height: 55px; animation-duration: 2.6s; animation-delay: 0.7s; animation-name: grass-sway-21; }
    .grass-blade-22 { left: 98%; height: 95px; animation-duration: 3.0s; animation-delay: 0.2s; animation-name: grass-sway-22; }

    @media (min-width: 768px) {
      /* Original heights for tablets and larger */
      .grass-blade-1 { height: 80px; }
      .grass-blade-2 { height: 95px; }
      .grass-blade-3 { height: 70px; }
      .grass-blade-4 { height: 110px; }
      .grass-blade-5 { height: 85px; }
      .grass-blade-6 { height: 100px; }
      .grass-blade-7 { height: 75px; }
      .grass-blade-8 { height: 90px; }
      .grass-blade-9 { height: 105px; }
      .grass-blade-10 { height: 80px; }
      .grass-blade-11 { height: 95px; }
      .grass-blade-12 { height: 70px; }
      .grass-blade-13 { height: 110px; }
      .grass-blade-14 { height: 85px; }
      .grass-blade-15 { height: 100px; }
      .grass-blade-16 { height: 75px; }
      .grass-blade-17 { height: 90px; }
      .grass-blade-18 { height: 105px; }
      .grass-blade-19 { height: 80px; }
      .grass-blade-20 { height: 95px; }
      .grass-blade-21 { height: 70px; }
      .grass-blade-22 { height: 110px; }
    }

    /* Unique sway animations for more organic motion */
    @keyframes grass-sway-1 { 0%, 100% { transform: rotate(-2.5deg) scaleX(1); } 50% { transform: rotate(2deg) scaleX(1.02); } }
    @keyframes grass-sway-2 { 0%, 100% { transform: rotate(-3deg) scaleX(1); } 50% { transform: rotate(2.5deg) scaleX(1.03); } }
    @keyframes grass-sway-3 { 0%, 100% { transform: rotate(-2deg) scaleX(1); } 50% { transform: rotate(1.8deg) scaleX(1.01); } }
    @keyframes grass-sway-4 { 0%, 100% { transform: rotate(-3.2deg) scaleX(1); } 50% { transform: rotate(2.8deg) scaleX(1.04); } }
    @keyframes grass-sway-5 { 0%, 100% { transform: rotate(-2.7deg) scaleX(1); } 50% { transform: rotate(2.2deg) scaleX(1.02); } }
    @keyframes grass-sway-6 { 0%, 100% { transform: rotate(-3.1deg) scaleX(1); } 50% { transform: rotate(2.6deg) scaleX(1.03); } }
    @keyframes grass-sway-7 { 0%, 100% { transform: rotate(-2.3deg) scaleX(1); } 50% { transform: rotate(1.9deg) scaleX(1.01); } }
    @keyframes grass-sway-8 { 0%, 100% { transform: rotate(-2.9deg) scaleX(1); } 50% { transform: rotate(2.4deg) scaleX(1.02); } }
    @keyframes grass-sway-9 { 0%, 100% { transform: rotate(-3.3deg) scaleX(1); } 50% { transform: rotate(2.9deg) scaleX(1.04); } }
    @keyframes grass-sway-10 { 0%, 100% { transform: rotate(-2.4deg) scaleX(1); } 50% { transform: rotate(2.1deg) scaleX(1.02); } }
    @keyframes grass-sway-11 { 0%, 100% { transform: rotate(-2.8deg) scaleX(1); } 50% { transform: rotate(2.3deg) scaleX(1.03); } }
    @keyframes grass-sway-12 { 0%, 100% { transform: rotate(-2.1deg) scaleX(1); } 50% { transform: rotate(1.7deg) scaleX(1.01); } }
    @keyframes grass-sway-13 { 0%, 100% { transform: rotate(-3.4deg) scaleX(1); } 50% { transform: rotate(3deg) scaleX(1.05); } }
    @keyframes grass-sway-14 { 0%, 100% { transform: rotate(-2.6deg) scaleX(1); } 50% { transform: rotate(2.2deg) scaleX(1.02); } }
    @keyframes grass-sway-15 { 0%, 100% { transform: rotate(-3deg) scaleX(1); } 50% { transform: rotate(2.5deg) scaleX(1.03); } }
    @keyframes grass-sway-16 { 0%, 100% { transform: rotate(-2.2deg) scaleX(1); } 50% { transform: rotate(1.8deg) scaleX(1.01); } }
    @keyframes grass-sway-17 { 0%, 100% { transform: rotate(-2.7deg) scaleX(1); } 50% { transform: rotate(2.3deg) scaleX(1.02); } }
    @keyframes grass-sway-18 { 0%, 100% { transform: rotate(-3.2deg) scaleX(1); } 50% { transform: rotate(2.8deg) scaleX(1.04); } }
    @keyframes grass-sway-19 { 0%, 100% { transform: rotate(-2.5deg) scaleX(1); } 50% { transform: rotate(2deg) scaleX(1.02); } }
    @keyframes grass-sway-20 { 0%, 100% { transform: rotate(-2.9deg) scaleX(1); } 50% { transform: rotate(2.4deg) scaleX(1.03); } }
    @keyframes grass-sway-21 { 0%, 100% { transform: rotate(-2deg) scaleX(1); } 50% { transform: rotate(1.6deg) scaleX(1.01); } }
    @keyframes grass-sway-22 { 0%, 100% { transform: rotate(-3.3deg) scaleX(1); } 50% { transform: rotate(2.9deg) scaleX(1.05); } }

    /* Confetti Animation */
    @keyframes confetti-fall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Keyboard hint */
    .keyboard-hint {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 12px;
      z-index: 100;
      opacity: 0;
      animation: fadeInOut 3s ease-in-out;
    }

    @keyframes fadeInOut {
      0%, 100% { opacity: 0; }
      10%, 90% { opacity: 1; }
    }
  </style>
</head>
<body class="bg-background-color">
  <div class="relative flex min-h-[100dvh] flex-col overflow-hidden bg-gradient-sky">
    <!-- Enhanced Sky Background -->
    <div class="sky-gradient"></div>
    
    <!-- Sun -->
    <div class="sun"></div>
    
    <!-- Enhanced Cloud Container with Realistic Clouds -->
    <div class="cloud-container">
      <!-- Original 6 clouds -->
      <div class="cloud cloud-1"></div>
      <div class="cloud cloud-2"></div>
      <div class="cloud cloud-3"></div>
      <div class="cloud cloud-4"></div>
      <div class="cloud cloud-5"></div>
      <div class="cloud cloud-6"></div>
      
      <!-- Additional 5 clouds starting at different positions -->
      <div class="cloud cloud-7"></div>
      <div class="cloud cloud-8"></div>
      <div class="cloud cloud-9"></div>
      <div class="cloud cloud-10"></div>
      <div class="cloud cloud-11"></div>
    </div>

    <!-- Realistic Grass -->
    <div class="grass-container">
      <div class="grass-layer"></div>
      <div class="grass-blades">
        <div class="grass-blade grass-blade-1"></div>
        <div class="grass-blade grass-blade-2"></div>
        <div class="grass-blade grass-blade-3"></div>
        <div class="grass-blade grass-blade-4"></div>
        <div class="grass-blade grass-blade-5"></div>
        <div class="grass-blade grass-blade-6"></div>
        <div class="grass-blade grass-blade-7"></div>
        <div class="grass-blade grass-blade-8"></div>
        <div class="grass-blade grass-blade-9"></div>
        <div class="grass-blade grass-blade-10"></div>
        <div class="grass-blade grass-blade-11"></div>
        <div class="grass-blade grass-blade-12"></div>
        <div class="grass-blade grass-blade-13"></div>
        <div class="grass-blade grass-blade-14"></div>
        <div class="grass-blade grass-blade-15"></div>
        <div class="grass-blade grass-blade-16"></div>
        <div class="grass-blade grass-blade-17"></div>
        <div class="grass-blade grass-blade-18"></div>
        <div class="grass-blade grass-blade-19"></div>
        <div class="grass-blade grass-blade-20"></div>
        <div class="grass-blade grass-blade-21"></div>
        <div class="grass-blade grass-blade-22"></div>
      </div>
    </div>
    
    <div class="relative z-10 flex grow flex-col items-center justify-center p-4">
      <!-- Home Screen - Improved container sizing -->
      <main id="home-screen" class="flex flex-col items-center justify-center text-center w-full max-w-xl md:max-w-2xl lg:max-w-3xl">
        <div class="bg-white/70 backdrop-blur-sm p-6 md:p-8 rounded-2xl shadow-lg flex flex-col items-center gap-5 w-full">
          <div class="flex items-center gap-3">
            <h1 class="font-brand text-4xl sm:text-5xl md:text-6xl text-gray-800 tracking-wider">Bird Tap Game</h1>
          </div>
          <p class="text-base sm:text-lg text-gray-600 mt-1">The classic "Chidiya Udd" game, reimagined digitally!</p>
          <div class="flex flex-col items-center gap-4 mt-6 w-full">
            <button id="start-btn" class="interactive btn-glow flex items-center justify-center gap-3 h-14 sm:h-16 w-full max-w-xs md:max-w-sm rounded-full bg-[var(--primary-color)] px-6 text-lg sm:text-xl md:text-2xl font-bold text-white shadow-xl transition-all duration-300 ease-in-out hover:bg-green-600 hover:-translate-y-1 hover:shadow-2xl transform">
              <svg class="h-7 w-7 sm:h-8 sm:w-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path clip-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" fill-rule="evenodd"></path>
              </svg>
              Start Game!
            </button>
            <button id="how-to-play-btn" class="interactive flex items-center justify-center gap-3 h-14 sm:h-16 w-full max-w-xs md:max-w-sm rounded-full bg-white/80 px-6 text-lg sm:text-xl md:text-2xl font-bold text-gray-700 shadow-lg transition-all duration-300 ease-in-out hover:bg-white hover:-translate-y-1 hover:shadow-2xl transform backdrop-blur-sm border border-gray-200">
              <svg class="h-6 w-6 sm:h-7 sm:w-7" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
              How To Play
            </button>
          </div>
        </div>
        
        <!-- Added version and creator text below the home screen container -->
        <div class="w-full max-w-xl md:max-w-2xl lg:max-w-3xl flex justify-between items-center mt-4 px-4">
          <div class="text-sm text-gray-600 font-medium">
            <span class="version-link" id="version-link">
              v2.0
              <span class="new-badge" id="new-badge">NEW</span>
            </span>
          </div>
          <div class="text-sm text-gray-600 font-medium">
            With ❤️ <a href="https://saswatpatra.carrd.co/" target="_blank" class="text-[var(--primary-color)] hover:text-green-600 transition-colors duration-200 underline">Saswat Patra</a>
          </div>
        </div>
      </main>

      <!-- Countdown Screen - Improved container sizing -->
      <main id="countdown-screen" class="hidden flex flex-col items-center justify-center text-center w-full max-w-xl md:max-w-2xl lg:max-w-3xl">
        <div class="bg-white/70 backdrop-blur-sm p-8 md:p-12 rounded-2xl shadow-lg flex flex-col items-center gap-6 w-full">
          <h2 class="font-brand text-5xl sm:text-6xl md:text-7xl text-gray-800 tracking-wider" id="countdown">3</h2>
        </div>
      </main>

      <!-- Game Screen - Improved container sizing -->
      <main id="game-screen" class="hidden flex flex-col items-center justify-center text-center w-full max-w-xl md:max-w-2xl lg:max-w-3xl">
        <div class="bg-white/70 backdrop-blur-sm p-6 md:p-8 rounded-2xl shadow-lg flex flex-col items-center gap-5 w-full">
          <div id="word-display" class="interactive font-brand text-3xl sm:text-4xl md:text-5xl text-gray-800 min-h-[80px] md:min-h-[100px] flex items-center justify-center px-4 py-4 rounded-xl bg-white/50 w-full break-words" aria-live="polite">
            <!-- Word appears here -->
          </div>

          <div class="flex justify-between w-full max-w-md md:max-w-lg text-sm sm:text-base md:text-lg font-semibold text-gray-700">
            <div>Score: <span id="score" class="transition-all duration-300" aria-live="polite">0</span></div>
            <div>Time: <span id="timer" class="transition-all duration-300" aria-live="polite">1.0</span>s</div>
          </div>

          <button id="bird-btn" class="interactive btn-glow flex items-center justify-center h-14 sm:h-16 w-full max-w-xs md:max-w-sm rounded-full bg-[var(--primary-color)] px-6 text-lg sm:text-xl md:text-2xl font-bold text-white shadow-xl transition-all duration-300 ease-in-out hover:bg-green-600 hover:-translate-y-1 hover:shadow-2xl transform mt-2" aria-label="Press Space or click to indicate bird">
            Bird!
          </button>

          <div class="text-sm sm:text-base md:text-lg font-semibold text-amber-600 mt-3 transition-all duration-300">
            Highscore: <span id="highscore">0</span>
          </div>
        </div>
      </main>

      <!-- End Screen - Improved container sizing -->
      <main id="end-screen" class="hidden flex flex-col items-center justify-center text-center w-full max-w-xl md:max-w-2xl lg:max-w-3xl">
        <div class="bg-white/70 backdrop-blur-sm p-6 md:p-8 rounded-2xl shadow-lg flex flex-col items-center gap-5 w-full">
          <h2 class="font-brand text-4xl sm:text-5xl md:text-6xl text-gray-800 tracking-wider">Game Over!</h2>
          <p class="text-base sm:text-lg text-gray-600 mt-1">Your Score: <span id="final-score" class="font-bold transition-all duration-300">0</span></p>
          <p class="text-sm sm:text-base text-amber-600 font-semibold transition-all duration-300">Highscore: <span id="end-highscore">0</span></p>
          
          <div class="flex flex-col items-center gap-4 mt-6 w-full">
            <button id="restart-btn" class="interactive btn-glow flex items-center justify-center gap-3 h-14 sm:h-16 w-full max-w-xs md:max-w-sm rounded-full bg-[var(--primary-color)] px-6 text-lg sm:text-xl md:text-2xl font-bold text-white shadow-xl transition-all duration-300 ease-in-out hover:bg-green-600 hover:-translate-y-1 hover:shadow-2xl transform">
              <svg class="h-7 w-7 sm:h-8 sm:w-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"></path>
              </svg>
              Restart Game
            </button>
            <button id="reset-btn" class="interactive btn-glow-amber flex items-center justify-center gap-3 h-14 sm:h-16 w-full max-w-xs md:max-w-sm rounded-full bg-amber-500 px-6 text-lg sm:text-xl md:text-2xl font-bold text-white shadow-xl transition-all duration-300 ease-in-out hover:bg-amber-600 hover:-translate-y-1 hover:shadow-2xl transform">
              <svg class="h-7 w-7 sm:h-8 sm:w-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"/>
              </svg>
              Reset Highscore
            </button>
            <button id="menu-btn" class="interactive flex items-center justify-center gap-3 h-14 sm:h-16 w-full max-w-xs md:max-w-sm rounded-full bg-white/80 px-6 text-lg sm:text-xl md:text-2xl font-bold text-gray-700 shadow-lg transition-all duration-300 ease-in-out hover:bg-white hover:-translate-y-1 hover:shadow-2xl transform backdrop-blur-sm border border-gray-200">
              <svg class="h-6 w-6 sm:h-7 sm:w-7" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
              Main Menu
            </button>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Improved How To Play Modal -->
  <div id="how-to-play-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm">
    <div class="relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl w-full max-w-md md:max-w-lg p-6 md:p-7">
      <button id="close-how-to-play" class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 transition-colors" aria-label="Close modal">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
      </button>

      <h2 class="font-brand text-3xl md:text-4xl text-gray-800 text-center mb-4">How to Play</h2>

      <div class="space-y-3 text-gray-700 text-sm md:text-base max-w-prose mx-auto">
        <p>✅ A word will appear on screen.</p>
        <p>🐦 If it's a <strong>bird</strong> (e.g., <em>Sparrow</em>, <em>Eagle</em>), tap the <strong>"Bird!"</strong> button or press <strong>Space</strong> quickly.</p>
        <p>🚫 If it's <strong>not a bird</strong> (e.g., <em>Tiger</em>, <em>Car</em>), <strong>do nothing</strong>.</p>
        <p>⏱️ You have only <strong>1 second</strong> to react to bird words!</p>
        <div class="mt-3 p-3 bg-red-50 border border-red-200 rounded-lg">
          <p class="text-red-700 font-medium text-center">Game Over if:</p>
          <ul class="list-disc pl-5 mt-1 space-y-1 text-red-600">
            <li>You tap on a <strong>non-bird</strong></li>
            <li>A <strong>bird word</strong> times out</li>
          </ul>
        </div>
        <p class="text-center text-amber-600 font-semibold mt-2">
          🏆 Beat your highscore to see confetti!
        </p>
      </div>

      <div class="mt-6 text-center">
        <button id="got-it-btn" class="interactive btn-glow px-6 py-2.5 rounded-full bg-[var(--primary-color)] text-white font-bold shadow-md hover:bg-green-600 transition-all">
          Got it! Play Now
        </button>
      </div>
    </div>
  </div>

  <!-- Changelog Modal with Custom Scrollbar and Scroll Indicator -->
  <div id="changelog-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm">
    <div class="relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl w-full max-w-[90vw] sm:max-w-md md:max-w-lg lg:max-w-xl max-h-[85vh] sm:max-h-[80vh] overflow-hidden flex flex-col">
      <button id="close-changelog" class="absolute top-4 right-4 z-10 text-gray-600 hover:text-gray-900 transition-colors bg-white/80 rounded-full p-1" aria-label="Close modal">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
      </button>

      <div class="p-6 md:p-8 pb-4">
        <h2 class="font-brand text-2xl sm:text-3xl md:text-4xl text-gray-800 text-center pr-8">What's New in Bird Land?</h2>
      </div>

      <div id="changelog-content" class="px-6 md:px-8 pb-6 md:pb-8 overflow-y-auto custom-scrollbar flex-1">
        <div class="space-y-6 text-gray-700">
          <!-- v2.0 Section -->
          <div>
            <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-3 flex items-center gap-2 flex-wrap">
              🌈 v2.0 - Visual Paradise 
              <span class="text-xs font-semibold text-white bg-gradient-to-r from-green-500 to-green-600 px-2 py-1 rounded-full">CURRENT</span>
            </h3>
            <ul class="space-y-2 text-sm md:text-base pl-1">
              <li>🎨 Complete UI redesign with modern aesthetics</li>
              <li>🌤️ Animated sky with floating clouds</li>
              <li>🌱 Realistic swaying grass animations</li>
              <li>☀️ Glowing sun effects</li>
              <li>✨ Glassmorphism design (backdrop blur)</li>
              <li>🎭 Smooth screen transitions</li>
              <li>🐦 Enhanced typography (Fredoka One + Poppins)</li>
              <li>🎨 Better color scheme and shadows</li>
              <li>📐 Improved responsive layout</li>
            </ul>
          </div>

          <div class="changelog-separator"></div>

          <!-- v1.0 Section -->
          <div>
            <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-3">🐣 v1.0 - The Beginning</h3>
            <ul class="space-y-2 text-sm md:text-base pl-1">
              <li>🎮 Core gameplay: Tap on birds, avoid non-birds</li>
              <li>⏱️ 1-second countdown timer</li>
              <li>🏆 Highscore tracking</li>
              <li>📱 Basic mobile support</li>
              <li>🎯 Simple word list (birds vs objects)</li>
            </ul>
          </div>
        </div>

        <div class="mt-8 text-center pb-2">
          <button id="close-changelog-btn" class="interactive btn-glow px-6 py-2.5 rounded-full bg-[var(--primary-color)] text-white font-bold shadow-md hover:bg-green-600 transition-all">
            Awesome!
          </button>
        </div>
      </div>

      <!-- Scroll Down Indicator -->
      <div class="scroll-indicator" id="scroll-indicator">
        <svg fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
        </svg>
      </div>
    </div>
  </div>

  <!-- Confetti Container -->
  <div id="confetti-container" class="fixed inset-0 pointer-events-none z-40 hidden"></div>

  <!-- Reset Feedback Popup -->
  <div id="reset-feedback" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm">
    <div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-8 max-w-sm w-full mx-auto text-center transform transition-all duration-300 scale-95 opacity-0">
      <div class="text-amber-500 mb-4">
        <svg class="h-16 w-16 mx-auto" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
        </svg>
      </div>
      <h3 class="text-2xl font-bold text-gray-800 mb-2">Highscore Reset!</h3>
      <p class="text-gray-600">Your highscore has been reset to 0.</p>
    </div>
  </div>

  <script>
    // ============================================
    // CONFIGURATION
    // ============================================
    const CONFIG = {
      TIMER_DURATION: 1000, // ms
      CONFETTI_COUNT: 150,
      WORD_HISTORY_SIZE: 5,
      STORAGE_KEY: 'birdGameHighscore',
      CHANGELOG_SEEN_KEY: 'birdGameChangelogSeen',
      COUNTDOWN_DURATION: 1000, // ms
      COUNTDOWN_START: 3
    };

    // ============================================
    // SCROLL INDICATOR MANAGER
    // ============================================
    class ScrollIndicatorManager {
      constructor() {
        this.indicator = document.getElementById('scroll-indicator');
        this.content = document.getElementById('changelog-content');
        this.init();
      }

      init() {
        if (!this.content || !this.indicator) return;

        // Check scroll on content scroll
        this.content.addEventListener('scroll', () => this.checkScroll());
        
        // Initial check
        setTimeout(() => this.checkScroll(), 100);
      }

      checkScroll() {
        if (!this.content || !this.indicator) return;

        const scrollTop = this.content.scrollTop;
        const scrollHeight = this.content.scrollHeight;
        const clientHeight = this.content.clientHeight;
        
        // Show indicator if there's more content below (not at bottom)
        const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;
        
        if (isAtBottom || scrollHeight <= clientHeight) {
          this.indicator.classList.remove('visible');
        } else {
          this.indicator.classList.add('visible');
        }
      }
    }

    // ============================================
    // CHANGELOG MANAGER - Handles NEW badge visibility
    // ============================================
    class ChangelogManager {
      constructor() {
        this.newBadge = document.getElementById('new-badge');
        this.versionLink = document.getElementById('version-link');
        this.modal = document.getElementById('changelog-modal');
        this.closeBtn = document.getElementById('close-changelog');
        this.closeModalBtn = document.getElementById('close-changelog-btn');
        this.scrollIndicator = null;
        
        this.init();
      }

      init() {
        // Check if changelog has been seen
        const hasSeenChangelog = localStorage.getItem(CONFIG.CHANGELOG_SEEN_KEY);
        
        if (hasSeenChangelog) {
          this.hideBadge();
        }

        // Event listeners
        this.versionLink.addEventListener('click', () => this.openModal());
        this.closeBtn.addEventListener('click', () => this.closeModal());
        this.closeModalBtn.addEventListener('click', () => this.closeModal());
        
        // Close on backdrop click
        this.modal.addEventListener('click', (e) => {
          if (e.target === this.modal) {
            this.closeModal();
          }
        });
      }

      openModal() {
        this.modal.classList.remove('hidden');
        this.markAsSeen();
        
        // Initialize scroll indicator
        if (!this.scrollIndicator) {
          this.scrollIndicator = new ScrollIndicatorManager();
        } else {
          // Re-check scroll position
          setTimeout(() => this.scrollIndicator.checkScroll(), 100);
        }
      }

      closeModal() {
        this.modal.classList.add('hidden');
      }

      markAsSeen() {
        localStorage.setItem(CONFIG.CHANGELOG_SEEN_KEY, 'true');
        this.hideBadge();
      }

      hideBadge() {
        if (this.newBadge) {
          this.newBadge.classList.add('hidden');
        }
      }
    }

    // ============================================
    // STORAGE MANAGER - Handles localStorage with validation
    // ============================================
    class StorageManager {
      static get(key, defaultValue = 0) {
        try {
          const value = localStorage.getItem(key);
          
          // Validate the retrieved value
          if (value === null || value === undefined) {
            return defaultValue;
          }
          
          const parsed = parseInt(value, 10);
          
          // Check if parsing resulted in a valid number
          if (isNaN(parsed) || !isFinite(parsed) || parsed < 0) {
            console.warn(`Invalid value in localStorage for key "${key}": ${value}. Using default.`);
            return defaultValue;
          }
          
          return parsed;
        } catch (error) {
          console.error(`Error reading from localStorage (key: ${key}):`, error);
          return defaultValue;
        }
      }

      static set(key, value) {
        try {
          // Validate input before storing
          if (typeof value !== 'number' || isNaN(value) || !isFinite(value)) {
            console.error(`Invalid value to store: ${value}`);
            return false;
          }
          
          localStorage.setItem(key, value.toString());
          return true;
        } catch (error) {
          // Handle quota exceeded or other storage errors
          if (error.name === 'QuotaExceededError') {
            console.error('localStorage quota exceeded');
          } else {
            console.error('Error writing to localStorage:', error);
          }
          return false;
        }
      }

      static isAvailable() {
        try {
          const test = '__storage_test__';
          localStorage.setItem(test, test);
          localStorage.removeItem(test);
          return true;
        } catch {
          return false;
        }
      }
    }

    // ============================================
    // SOUND MANAGER - Handles Web Audio API
    // ============================================
    class SoundManager {
      constructor() {
        this.audioContext = null;
        this.isInitialized = false;
      }

      init() {
        if (this.isInitialized) return true;
        
        try {
          const AudioContext = window.AudioContext || window.webkitAudioContext;
          
          if (!AudioContext) {
            console.warn('Web Audio API not supported');
            return false;
          }
          
          this.audioContext = new AudioContext();
          this.isInitialized = true;
          
          // Resume context for Safari
          if (this.audioContext.state === 'suspended') {
            this.audioContext.resume();
          }
          
          return true;
        } catch (error) {
          console.error('Failed to initialize audio:', error);
          return false;
        }
      }

      playCountdown() {
        if (!this.init()) return;
        
        try {
          const ctx = this.audioContext;
          const oscillator = ctx.createOscillator();
          const gainNode = ctx.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(ctx.destination);
          
          oscillator.frequency.value = 600;
          oscillator.type = 'square';
          
          gainNode.gain.setValueAtTime(0.2, ctx.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.15);
          
          oscillator.start(ctx.currentTime);
          oscillator.stop(ctx.currentTime + 0.15);
        } catch (error) {
          console.error('Error playing countdown sound:', error);
        }
      }

      playConfetti() {
        if (!this.init()) return;
        
        try {
          const ctx = this.audioContext;
          
          for (let i = 0; i < 3; i++) {
            setTimeout(() => {
              const oscillator = ctx.createOscillator();
              const gainNode = ctx.createGain();
              
              oscillator.connect(gainNode);
              gainNode.connect(ctx.destination);
              
              oscillator.frequency.value = 400 + (i * 200);
              oscillator.type = 'sine';
              
              gainNode.gain.setValueAtTime(0.15, ctx.currentTime);
              gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
              
              oscillator.start(ctx.currentTime);
              oscillator.stop(ctx.currentTime + 0.3);
            }, i * 100);
          }
        } catch (error) {
          console.error('Error playing confetti sound:', error);
        }
      }
    }

    // ============================================
    // WORD MANAGER - Prevents word repetition
    // ============================================
    class WordManager {
      constructor(birdWords, nonBirdWords, historySize = CONFIG.WORD_HISTORY_SIZE) {
        this.birdWords = [...birdWords];
        this.nonBirdWords = [...nonBirdWords];
        this.history = [];
        this.historySize = historySize;
      }

      getRandomWord(isBird) {
        const wordList = isBird ? this.birdWords : this.nonBirdWords;
        
        // Filter out words in recent history
        const availableWords = wordList.filter(word => !this.history.includes(word));
        
        // If all words are in history (unlikely), clear history
        const selectFrom = availableWords.length > 0 ? availableWords : wordList;
        
        // Select random word
        const word = selectFrom[Math.floor(Math.random() * selectFrom.length)];
        
        // Add to history
        this.history.push(word);
        
        // Maintain history size
        if (this.history.length > this.historySize) {
          this.history.shift();
        }
        
        return word;
      }

      reset() {
        this.history = [];
      }
    }

    // ============================================
    // UI CONTROLLER - Manages DOM elements
    // ============================================
    class UIController {
      constructor() {
        this.elements = {
          homeScreen: document.getElementById('home-screen'),
          countdownScreen: document.getElementById('countdown-screen'),
          gameScreen: document.getElementById('game-screen'),
          endScreen: document.getElementById('end-screen'),
          countdownEl: document.getElementById('countdown'),
          wordDisplay: document.getElementById('word-display'),
          scoreEl: document.getElementById('score'),
          timerEl: document.getElementById('timer'),
          highscoreEl: document.getElementById('highscore'),
          finalScoreEl: document.getElementById('final-score'),
          endHighscoreEl: document.getElementById('end-highscore'),
          confettiContainer: document.getElementById('confetti-container'),
          resetFeedback: document.getElementById('reset-feedback'),
          resetPopup: document.querySelector('#reset-feedback .rounded-2xl')
        };
      }

      showScreen(screenName) {
        const screens = ['homeScreen', 'countdownScreen', 'gameScreen', 'endScreen'];
        screens.forEach(screen => {
          this.elements[screen].classList.add('hidden');
        });
        this.elements[screenName].classList.remove('hidden');
      }

      updateScore(score) {
        this.elements.scoreEl.textContent = score;
      }

      updateTimer(timeLeft) {
        this.elements.timerEl.textContent = timeLeft.toFixed(1);
        
        if (timeLeft <= 0.3) {
          this.elements.timerEl.classList.add('text-red-500');
        } else {
          this.elements.timerEl.classList.remove('text-red-500');
        }
      }

      updateHighscore(highscore) {
        this.elements.highscoreEl.textContent = highscore;
        this.elements.endHighscoreEl.textContent = highscore;
      }

      updateWord(word) {
        this.elements.wordDisplay.textContent = word;
      }

      updateCountdown(count) {
        this.elements.countdownEl.textContent = count;
      }

      showEndScreen(score, highscore) {
        this.elements.finalScoreEl.textContent = score;
        this.elements.endHighscoreEl.textContent = highscore;
        this.showScreen('endScreen');
      }

      createConfetti() {
        this.elements.confettiContainer.classList.remove('hidden');
        this.elements.confettiContainer.innerHTML = '';

        const colors = ['#FFC107', '#4CAF50', '#2196F3', '#E91E63', '#9C27B0', '#FF5722'];

        for (let i = 0; i < CONFIG.CONFETTI_COUNT; i++) {
          const confetti = document.createElement('div');
          const size = Math.random() * 10 + 5;
          const color = colors[Math.floor(Math.random() * colors.length)];
          
          confetti.style.cssText = `
            position: absolute;
            width: ${size}px;
            height: ${size}px;
            background-color: ${color};
            top: -20px;
            left: ${Math.random() * 100}%;
            border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
            opacity: ${Math.random() * 0.8 + 0.2};
            transform: rotate(${Math.random() * 360}deg);
            animation: confetti-fall ${Math.random() * 3 + 2}s linear forwards;
          `;

          this.elements.confettiContainer.appendChild(confetti);
        }

        setTimeout(() => {
          this.elements.confettiContainer.classList.add('hidden');
          this.elements.confettiContainer.innerHTML = '';
        }, 4000);
      }

      showResetFeedback() {
        this.elements.resetFeedback.classList.remove('hidden');
        setTimeout(() => {
          this.elements.resetPopup.classList.remove('scale-95', 'opacity-0');
          this.elements.resetPopup.classList.add('scale-100', 'opacity-100');
        }, 10);

        setTimeout(() => {
          this.elements.resetPopup.classList.remove('scale-100', 'opacity-100');
          this.elements.resetPopup.classList.add('scale-95', 'opacity-0');
          setTimeout(() => {
            this.elements.resetFeedback.classList.add('hidden');
          }, 300);
        }, 2000);
      }

      hideConfetti() {
        this.elements.confettiContainer.classList.add('hidden');
      }
    }

    // ============================================
    // GAME STATE - Main game logic using requestAnimationFrame
    // ============================================
    class GameState {
      constructor(ui, soundManager, wordManager) {
        this.ui = ui;
        this.soundManager = soundManager;
        this.wordManager = wordManager;
        
        this.score = 0;
        this.highscore = StorageManager.get(CONFIG.STORAGE_KEY, 0);
        this.currentWord = '';
        this.isBird = false;
        this.isActive = false;
        this.startTime = 0;
        this.animationFrameId = null;
        this.newHighscoreAchieved = false;
        
        this.ui.updateHighscore(this.highscore);
      }

      start() {
        this.score = 0;
        this.newHighscoreAchieved = false;
        this.isActive = true;
        this.wordManager.reset();
        this.ui.updateScore(this.score);
        this.showCountdown();
      }

      showCountdown() {
        this.ui.showScreen('countdownScreen');
        
        let count = CONFIG.COUNTDOWN_START;
        this.ui.updateCountdown(count);
        this.soundManager.playCountdown();

        const countdownInterval = setInterval(() => {
          count--;
          if (count > 0) {
            this.ui.updateCountdown(count);
            this.soundManager.playCountdown();
          } else {
            clearInterval(countdownInterval);
            this.ui.updateCountdown('Go!');
            this.soundManager.playCountdown();
            
            setTimeout(() => {
              this.ui.showScreen('gameScreen');
              this.startWordCycle();
            }, 500);
          }
        }, CONFIG.COUNTDOWN_DURATION);
      }

      startWordCycle() {
        if (!this.isActive) return;

        // Cancel any existing animation frame
        if (this.animationFrameId) {
          cancelAnimationFrame(this.animationFrameId);
        }

        // Get new word
        this.isBird = Math.random() > 0.5;
        this.currentWord = this.wordManager.getRandomWord(this.isBird);
        this.ui.updateWord(this.currentWord);

        // Set start time
        this.startTime = performance.now();
        
        // Start animation loop
        this.updateTimer();
      }

      updateTimer() {
        if (!this.isActive) return;

        const elapsed = performance.now() - this.startTime;
        const timeLeft = Math.max(0, (CONFIG.TIMER_DURATION - elapsed) / 1000);
        
        this.ui.updateTimer(timeLeft);

        if (timeLeft <= 0) {
          // Time's up
          if (this.isBird) {
            // Bird word timed out - game over
            this.end();
          } else {
            // Non-bird word timed out - continue
            this.startWordCycle();
          }
        } else {
          // Continue animation
          this.animationFrameId = requestAnimationFrame(() => this.updateTimer());
        }
      }

      handleBirdClick() {
        if (!this.isActive) return;

        if (this.isBird) {
          // Correct! It's a bird
          this.score++;
          this.ui.updateScore(this.score);

          // Check for new highscore
          if (this.score > this.highscore) {
            this.highscore = this.score;
            this.ui.updateHighscore(this.highscore);
            StorageManager.set(CONFIG.STORAGE_KEY, this.highscore);
            this.newHighscoreAchieved = true;
          }

          // Cancel current animation
          if (this.animationFrameId) {
            cancelAnimationFrame(this.animationFrameId);
          }

          // Start next word
          this.startWordCycle();
        } else {
          // Wrong! It's not a bird
          this.end();
        }
      }

      end() {
        this.isActive = false;
        
        // Cancel animation frame
        if (this.animationFrameId) {
          cancelAnimationFrame(this.animationFrameId);
          this.animationFrameId = null;
        }

        // Show confetti if new highscore
        if (this.newHighscoreAchieved) {
          this.ui.createConfetti();
          this.soundManager.playConfetti();
        }

        this.ui.showEndScreen(this.score, this.highscore);
      }

      resetHighscore() {
        this.highscore = 0;
        StorageManager.set(CONFIG.STORAGE_KEY, 0);
        this.ui.updateHighscore(0);
        this.ui.showResetFeedback();
      }

      showHome() {
        this.isActive = false;
        if (this.animationFrameId) {
          cancelAnimationFrame(this.animationFrameId);
        }
        this.ui.showScreen('homeScreen');
        this.ui.hideConfetti();
      }
    }

    // ============================================
    // KEYBOARD CONTROLLER - Handles keyboard input
    // ============================================
    class KeyboardController {
      constructor(game) {
        this.game = game;
        this.boundHandler = this.handleKeyPress.bind(this);
        this.init();
      }

      init() {
        document.addEventListener('keydown', this.boundHandler);
        
        // Show keyboard hint on first visit
        if (!sessionStorage.getItem('keyboardHintShown')) {
          this.showKeyboardHint();
          sessionStorage.setItem('keyboardHintShown', 'true');
        }
      }

      handleKeyPress(event) {
        // Space or Enter for bird button
        if (event.code === 'Space' || event.code === 'Enter') {
          event.preventDefault();
          
          const activeScreen = this.getActiveScreen();
          
          if (activeScreen === 'home') {
            document.getElementById('start-btn').click();
          } else if (activeScreen === 'game') {
            document.getElementById('bird-btn').click();
          } else if (activeScreen === 'end') {
            document.getElementById('restart-btn').click();
          }
        }
        
        // Escape to close modals
        if (event.code === 'Escape') {
          const howToPlayModal = document.getElementById('how-to-play-modal');
          const changelogModal = document.getElementById('changelog-modal');
          
          if (!howToPlayModal.classList.contains('hidden')) {
            howToPlayModal.classList.add('hidden');
          }
          if (!changelogModal.classList.contains('hidden')) {
            changelogModal.classList.add('hidden');
          }
        }
      }

      getActiveScreen() {
        if (!document.getElementById('home-screen').classList.contains('hidden')) return 'home';
        if (!document.getElementById('game-screen').classList.contains('hidden')) return 'game';
        if (!document.getElementById('end-screen').classList.contains('hidden')) return 'end';
        return null;
      }

      showKeyboardHint() {
        const hint = document.createElement('div');
        hint.className = 'keyboard-hint';
        hint.textContent = '💡 Tip: Press SPACE to play!';
        document.body.appendChild(hint);
        
        setTimeout(() => {
          hint.remove();
        }, 3000);
      }

      destroy() {
        document.removeEventListener('keydown', this.boundHandler);
      }
    }

    // ============================================
    // APPLICATION INITIALIZATION
    // ============================================
    class BirdTapGame {
      constructor() {
        // Word lists
        const birdNames = [
          'Sparrow', 'Crow', 'Pigeon', 'Parrot', 'Eagle', 'Peacock',
          'Owl', 'Duck', 'Swan', 'Hawk', 'Falcon', 'Vulture',
          'Kingfisher', 'Woodpecker', 'Mynah', 'Bulbul', 'Robin',
          'Hummingbird', 'Flamingo', 'Stork'
        ];

        const nonBirdWords = [
          'Tiger', 'Lion', 'Elephant', 'Car', 'House', 'Tree',
          'Computer', 'Phone', 'Book', 'Chair', 'Table', 'Mountain',
          'River', 'Ocean', 'Sun', 'Moon', 'Star', 'Cloud',
          'Rain', 'Wind', 'Fire', 'Water', 'Earth', 'Air'
        ];

        // Initialize managers
        this.changelogManager = new ChangelogManager();
        this.ui = new UIController();
        this.soundManager = new SoundManager();
        this.wordManager = new WordManager(birdNames, nonBirdWords);
        this.game = new GameState(this.ui, this.soundManager, this.wordManager);
        this.keyboard = new KeyboardController(this.game);

        // Check localStorage availability
        if (!StorageManager.isAvailable()) {
          console.warn('localStorage not available - highscore will not persist');
        }

        this.bindEvents();
      }

      bindEvents() {
        // Button event listeners
        document.getElementById('start-btn').addEventListener('click', () => {
          this.soundManager.init(); // Initialize audio on user interaction
          this.game.start();
        });

        document.getElementById('bird-btn').addEventListener('click', () => {
          this.game.handleBirdClick();
        });

        document.getElementById('restart-btn').addEventListener('click', () => {
          this.game.start();
        });

        document.getElementById('reset-btn').addEventListener('click', () => {
          this.game.resetHighscore();
        });

        document.getElementById('menu-btn').addEventListener('click', () => {
          this.game.showHome();
        });

        // Modal events
        const modal = document.getElementById('how-to-play-modal');
        
        document.getElementById('how-to-play-btn').addEventListener('click', () => {
          modal.classList.remove('hidden');
        });

        document.getElementById('close-how-to-play').addEventListener('click', () => {
          modal.classList.add('hidden');
        });

        document.getElementById('got-it-btn').addEventListener('click', () => {
          modal.classList.add('hidden');
          this.game.showHome();
        });

        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.classList.add('hidden');
          }
        });
      }
    }

    // Initialize the game when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        new BirdTapGame();
      });
    } else {
      new BirdTapGame();
    }
  </script>
</body>
</html>
